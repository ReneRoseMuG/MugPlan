# FT (05): Mitarbeiterverwaltung

## Ziel / Zweck

Dieses Feature dient der zentralen Verwaltung von Mitarbeitern als ausführende Ressourcen für Termine. Ziel ist es, Mitarbeiter als Stammdaten zu pflegen und ihre Einsätze über Termine hinweg nachvollziehbar darzustellen, ohne Terminplanung und Ressourcendarstellung fachlich zu vermischen.

## Fachliche Beschreibung

Die Mitarbeiterverwaltung stellt Funktionen zum Anlegen, Bearbeiten, Anzeigen und Deaktivieren von Mitarbeitern bereit. Mitarbeiter können unabhängig von Terminen existieren und werden im Rahmen der Terminvergabe optional Terminen zugewiesen. Die Zuweisung selbst erfolgt nicht innerhalb dieses Features, sondern im Kontext der Terminplanung.

Jeder Mitarbeiter besitzt ein Status-Flag **is_active** (Standardwert: TRUE). Nur aktive Mitarbeiter stehen in der Anwendung für Funktionen wie Terminzuweisung, Tour-Zuordnung oder Team-Zuordnung zur Verfügung. Deaktivierte Mitarbeiter bleiben in der Datenbank erhalten und sind ausschließlich in der Mitarbeiterübersicht sichtbar, um ihre vollständige Terminhistorie nachvollziehbar zu halten. Dies gewährleistet, dass jederzeit ersichtlich ist, welcher Mitarbeiter bei welchem Kunden im Einsatz war.

Für jeden Mitarbeiter ist eine Terminübersicht verfügbar. Diese Übersicht zeigt alle Termine, denen der Mitarbeiter aktuell oder in der Vergangenheit zugewiesen war, und bildet damit die Einsatzhistorie des Mitarbeiters ab. Die Terminliste wird ausschließlich aus der Relation zwischen Termin und Mitarbeiter abgeleitet und ist jederzeit vollständig einsehbar.

Änderungen an zukünftigen Terminen wirken sich unmittelbar auf die Terminliste eines Mitarbeiters aus. Vergangene Termine sind read-only und dürfen nicht nachträglich verändert werden, um die Stabilität der Einsatzhistorie sicherzustellen.

In der Terminübersicht eines Mitarbeiters sind neben Zeitraum und Bezeichnung des Termins auch die zugehörige Tour sowie der Kunde erkennbar, da Termine diese Informationen referenzieren.

## Regeln & Randbedingungen

- Mitarbeiter können unabhängig von Terminen existieren.
- Die Zuweisung eines Mitarbeiters zu einem Termin ist optional.
- Ein Mitarbeiter kann einem oder mehreren Terminen zugewiesen sein.
- Jeder Mitarbeiter besitzt ein Status-Flag **is_active** (Standardwert: TRUE).
- **Nur aktive Mitarbeiter** dürfen:
    - neuen oder zukünftigen Terminen zugewiesen werden,
    - Touren zugeordnet werden,
    - Teams zugeordnet werden,
    - in Auswahlisten für Planungsfunktionen erscheinen.
- **Deaktivierte Mitarbeiter**:
    - werden physisch nicht gelöscht,
    - bleiben in allen bestehenden Terminen und Relationen sichtbar,
    - sind ausschließlich in der Mitarbeiterübersicht einsehbar,
    - dienen der Nachvollziehbarkeit der Einsatzhistorie,
    - können reaktiviert werden, indem is_active wieder auf TRUE gesetzt wird.
- Die Terminliste eines Mitarbeiters wird ausschließlich aus den aktuellen Termindaten abgeleitet.
- Vergangene Termine sind read-only und dürfen nicht verändert werden.
- Wird ein Mitarbeiter vor Durchführung eines Termins ersetzt, darf dieser Termin nicht mehr in der Terminliste des abgelösten Mitarbeiters erscheinen.
- Es dürfen keine widersprüchlichen Zustände entstehen, bei denen ein Mitarbeiter als zugewiesen gilt, ohne dass ein entsprechender Termin existiert.
- Mitarbeiter existieren unabhängig von Tour-Zugehörigkeit und Team-Zugehörigkeit. Löschungen von Tour oder Team wirken sich nur auf die FK-Eigenschaften des Mitarbeiters aus (Setzen auf NULL).

## **Use Cases**

### **UC: Mitarbeiter anlegen**

**Akteur**

Disponent

**Ziel**

Einen neuen Mitarbeiter mit Stammdaten erfassen.

**Vorbedingungen**

- Keine.

**Ablauf**

1. Benutzer erfasst den Namen des Mitarbeiters.
2. Benutzer erfasst optionale Stammdaten.
3. Das System speichert den Mitarbeiter.

**Ergebnis**

Der Mitarbeiter ist angelegt und steht für Terminzuweisungen zur Verfügung.

### **UC: Mitarbeiter bearbeiten**

**Akteur**

Disponent

**Ziel**

Stammdaten eines bestehenden Mitarbeiters ändern.

**Vorbedingungen**

- Der Mitarbeiter existiert.

**Ablauf**

1. Benutzer öffnet die Mitarbeiterdetails.
2. Benutzer ändert die Stammdaten.
3. Das System speichert die Änderungen.

**Ergebnis**

Die Mitarbeiterdaten sind aktualisiert.

### **UC: Mitarbeiter-Termine anzeigen**

**Akteur**

Leser (z. B. Monteur, berechtigte Mitarbeiter)

**Ziel**

Die Stammdaten eines Mitarbeiters einsehen und nachvollziehen, welchen Terminen dieser Mitarbeiter aktuell oder in der Vergangenheit zugeordnet ist.

**Vorbedingungen**

- Der Mitarbeiter existiert.
- Der Nutzer ist berechtigt, Mitarbeiterdaten einzusehen.

**Auslöser**

Der Nutzer wählt einen Mitarbeiter zur Anzeige aus.

**Ablauf**

1. Der Nutzer wählt einen bestehenden Mitarbeiter aus.
2. Das System zeigt die Stammdaten des Mitarbeiters an.
3. Das System ermittelt alle Termine, denen der Mitarbeiter zugewiesen ist, über die Termin-Mitarbeiter-Relation.
4. Das System zeigt zu jedem Termin die relevanten Informationen an.
5. Das System stellt sicher, dass auch vergangene Termine angezeigt werden.

**Alternativabläufe**

- Dem Mitarbeiter sind keine Termine zugewiesen: Das System zeigt eine leere Terminliste an.

**Ergebnis**

Die Stammdaten des Mitarbeiters sowie eine vollständige Übersicht aller zugeordneten Termine sind sichtbar.

Die Terminliste bildet die Einsatzhistorie des Mitarbeiters ab.

**Angezeigte Informationen (Terminliste)**

- Terminzeitraum (Start- und ggf. Enddatum)
- Terminbezeichnung
- Zugeordnete Tour
- Zugeordneter Kunde

### **UC: Mitarbeiter deaktivieren**

**Akteur**

[RO (01): Disponent](https://www.notion.so/RO-01-Disponent-2eada094354e80c1af01d041b1bda7af?pvs=21) 

**Ziel**

Einen Mitarbeiter aus dem aktiven Betrieb nehmen, ohne die Historie zu verlieren.

**Vorbedingungen**

- Der Mitarbeiter existiert und ist aktiv (is_active = TRUE).

**Ablauf**

1. Benutzer wählt einen Mitarbeiter aus.
2. Benutzer wählt die Funktion „Mitarbeiter deaktivieren".
3. Das System zeigt eine Bestätigung an.
4. Benutzer bestätigt die Deaktivierung.
5. Das System setzt is_active auf FALSE.
6. Das System speichert die Änderung.

**Alternativabläufe**

- Abbruch: Keine Änderung, Mitarbeiter bleibt aktiv.

**Ergebnis**

Der Mitarbeiter ist deaktiviert und erscheint nicht mehr in Auswahlisten für Terminzuweisungen, Tour-Zuordnungen oder Team-Zuordnungen.

Bestehende Terminbezüge, Tour- und Team-Zugehörigkeiten bleiben für historische Nachvollziehbarkeit erhalten.

Der Mitarbeiter ist weiterhin in der Mitarbeiterübersicht sichtbar und seine vollständige Terminhistorie bleibt einsehbar.

### **UC: Mitarbeiter reaktivieren**

**Akteur**

Disponent

**Ziel**

Einen deaktivierten Mitarbeiter wieder in den aktiven Betrieb aufnehmen.

**Vorbedingungen**

- Der Mitarbeiter existiert und ist deaktiviert (is_active = FALSE).

**Ablauf**

1. Benutzer wählt einen deaktivierten Mitarbeiter aus der Mitarbeiterübersicht.
2. Benutzer wählt die Funktion „Mitarbeiter reaktivieren".
3. Das System setzt is_active auf TRUE.
4. Das System speichert die Änderung.

**Ergebnis**

Der Mitarbeiter ist wieder aktiv und steht für alle Planungsfunktionen zur Verfügung.
